{{#section 'css'}}
<style nonce="{{nonce}}">
    .content-container {
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }

    .add-user-button {
        background: #dc3545;
        border: none;
    }

    .pagination-button {
        background-color: #dc3545;
        color: #fff;
        border-color: #dc3545;
    }

    .pagination-link {
        background-color: #dc3545;
        color: #fff;
    }

    .pagination-link.active {
        background-color: #fff;
        color: #000;
    }
</style>
{{/section}}

<div class="content-container p-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="mb-0">Danh sách người dùng</h4>
        <a href="/admin/users/add" class="btn btn-primary add-user-button">Thêm người dùng</a>
    </div>

    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Tên</th>
                    <th scope="col">Email</th>
                    <th scope="col">Vai trò</th>
                    <th scope="col">Thao tác</th>
                </tr>
            </thead>
            <tbody>
                {{#each this.users}}
                <tr>
                    <th scope="row">{{id}}</th>
                    <td>{{name}}</td>
                    <td>{{email}}</td>
                    <td>
                        {{#if isAdmin}}
                        <span class="badge bg-danger">Admin</span>
                        {{else if isEditor}}
                        <span class="badge bg-warning">Editor</span>
                        {{else if isWriter}}
                        <span class="badge bg-info">Writer</span>
                        {{else}}
                        <span class="badge bg-secondary">User</span>
                        {{/if}}
                    </td>
                    <td>
                        <a href="/admin/users/edit?id={{id}}" class="btn btn-sm btn-primary">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="/admin/users/delete?id={{id}}" class="btn btn-sm btn-danger">
                            <i class="fas fa-trash"></i>
                        </a>
                    </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>

    <nav aria-label="Page navigation" class="mt-4">
        <ul class="pagination justify-content-center">
            <li class="page-item {{#if (eq currentPage 1)}}disabled{{/if}}">
                <a class="page-link pagination-button" href="?page={{subtract currentPage 1}}" aria-label="Previous">
                    &laquo;
                </a>
            </li>
            {{#each pages}}
            <li class="page-item {{#if (eq this ../currentPage)}}active{{/if}}">
                <a class="page-link {{#if (eq this ../currentPage)}}active{{else}}pagination-link{{/if}}"
                    href="?page={{this}}">
                    {{this}}
                </a>
            </li>
            {{/each}}
            <li class="page-item {{#if (eq currentPage totalPage)}}disabled{{/if}}">
                <a class="page-link pagination-button" href="?page={{add currentPage 1}}" aria-label="Next">
                    &raquo;
                </a>
            </li>
        </ul>
    </nav>
</div>